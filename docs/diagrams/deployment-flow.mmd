graph LR
    subgraph "Developer"
        Code[Code Changes]
        Commit[Git Commit]
        Push[Push to GitHub<br/>main branch]
    end
    
    subgraph "GitHub Actions"
        Trigger[Workflow Triggered]
        Test[Run Tests<br/>Linting, Syntax, Imports]
        TestPass{Tests Pass?}
        Build[Build Docker Image<br/>on Hetzner Server]
        Import[Import to k3s<br/>docker save | k3s ctr import]
    end
    
    subgraph "Kubernetes"
        Apply[Apply Manifests<br/>kubectl apply -f k8s/]
        RollingUpdate[Rolling Update<br/>maxSurge: 25%<br/>maxUnavailable: 25%]
        HealthCheck[Health Checks<br/>Liveness + Readiness]
        Ready{Pod Ready?}
        Verify[Verify Deployment<br/>curl /health]
    end
    
    Code --> Commit
    Commit --> Push
    Push --> Trigger
    Trigger --> Test
    Test --> TestPass
    TestPass -->|No| Fail[Deployment Failed]
    TestPass -->|Yes| Build
    Build --> Import
    Import --> Apply
    Apply --> RollingUpdate
    RollingUpdate --> HealthCheck
    HealthCheck --> Ready
    Ready -->|No| Rollback[Rollback to Previous]
    Ready -->|Yes| Verify
    Verify --> Success[Deployment Success]
    
    style Code fill:#4a90e2,stroke:#2c5aa0,color:#fff
    style Test fill:#7b68ee,stroke:#5a4fcf,color:#fff
    style Build fill:#50c878,stroke:#3a9d5f,color:#fff
    style RollingUpdate fill:#ff6b6b,stroke:#d63031,color:#fff
    style Success fill:#4a90e2,stroke:#2c5aa0,color:#fff
